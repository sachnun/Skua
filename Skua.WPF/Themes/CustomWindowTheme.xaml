<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:materialdesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Skua.WPF">

    <Style x:Key="CustomWindow" TargetType="{x:Type local:CustomWindow}">
        <Setter Property="Background" Value="{DynamicResource MaterialDesignBackground}" />
        <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}" />
        <Setter Property="WindowChrome.WindowChrome">
            <Setter.Value>
                <WindowChrome
                    CaptionHeight="28"
                    CornerRadius="0"
                    GlassFrameThickness="0"
                    ResizeBorderThickness="8" />
            </Setter.Value>
        </Setter>
        <Setter Property="WindowStyle" Value="None" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CustomWindow">
                    <Border BorderBrush="DimGray" BorderThickness="1" CornerRadius="10" Background="{DynamicResource MaterialDesignBackground}">
                        <Grid>
                            <Grid.Clip>
                                <RectangleGeometry RadiusX="9" RadiusY="9" Rect="0,0,10000,10000" />
                            </Grid.Clip>
                        <materialdesign:Card UniformCornerRadius="9">
                            <DockPanel>
                                <!--  Title bar  -->
                                <Border DockPanel.Dock="Top" CornerRadius="9,9,0,0" ClipToBounds="True">
                                <materialdesign:ColorZone Height="32">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>

                                        <!--  Icon  -->
                                        <Grid
                                            Width="30"
                                            Height="30"
                                            Margin="6,0"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center">
                                            <Border
                                                Width="30"
                                                Height="30"
                                                Background="{DynamicResource PrimaryHueMidBrush}"
                                                CornerRadius="15" />
                                            <Image HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Image.Source>
                                                    <BitmapImage DecodePixelHeight="32" UriSource="../SkuaImage.png" />
                                                </Image.Source>
                                            </Image>
                                        </Grid>

                                        <!--  Title  -->
                                        <Viewbox
                                            Grid.Column="1"
                                            Margin="6,0,0,0"
                                            HorizontalAlignment="Left">
                                            <TextBlock Foreground="{DynamicResource PrimaryHueMidBrush}" Text="{TemplateBinding Title}" />
                                        </Viewbox>

                                        <!--  System Buttons  -->
                                        <StackPanel
                                            Grid.Column="2"
                                            Height="28"
                                            VerticalAlignment="Top"
                                            Orientation="Horizontal">
                                            <!--  Minimize  -->
                                            <Button
                                                x:Name="PART_Minimize"
                                                materialdesign:ButtonAssist.CornerRadius="0 0 0 10"
                                                Content="{materialdesign:PackIcon Kind=WindowMinimize}"
                                                Style="{StaticResource MaterialDesignFlatButton}"
                                                WindowChrome.IsHitTestVisibleInChrome="True" />
                                            <!--  Maximize  -->
                                            <Button
                                                x:Name="PART_Maximize"
                                                materialdesign:ButtonAssist.CornerRadius="0"
                                                Content="{materialdesign:PackIcon Kind=WindowMaximize}"
                                                Style="{StaticResource MaterialDesignFlatButton}"
                                                WindowChrome.IsHitTestVisibleInChrome="True" />
                                            <!--  Close  -->
                                            <Button
                                                x:Name="PART_Close"
                                                materialdesign:ButtonAssist.CornerRadius="0"
                                                Content="{materialdesign:PackIcon Kind=WindowClose}"
                                                Style="{StaticResource MaterialDesignFlatButton}"
                                                WindowChrome.IsHitTestVisibleInChrome="True" />
                                        </StackPanel>
                                    </Grid>
                                </materialdesign:ColorZone>
                                </Border>
                                <!--  Content Presenter  -->
                                <Border CornerRadius="0,0,9,9" ClipToBounds="True">
                                    <Border.Clip>
                                        <RectangleGeometry RadiusX="9" RadiusY="9" Rect="0,0,10000,10000" />
                                    </Border.Clip>
                                    <ContentPresenter Content="{TemplateBinding Content}" ClipToBounds="True" />
                                </Border>
                            </DockPanel>
                        </materialdesign:Card>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>